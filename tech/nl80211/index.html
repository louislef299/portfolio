<!doctype html><html lang=en-us><head><meta http-equiv=X-Clacks-Overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Wireless Interface Information using nl80211/Arch Install | Louis Lefebvre</title>
<meta name=title content="Wireless Interface Information using nl80211/Arch Install"><meta name=description content="Just copying this over from one of my previous projects. It goes over my
experience with low-level network programming using Linux network interfaces and
Go. Along the way, I was having issues battling Network Manager when I had
Fedora Linux installed, so I switched over to Arch and decided to just use
iwd instead. It has proven to be must better in my experience and
essentially remains out of the way.

Guess what? Not a whole lot of documentation for nl80211! Yayyyyy :)"><meta name=author content><meta name=keywords content="linux,net,"><meta property="og:url" content="https://louislefebvre.net/tech/nl80211/"><meta property="og:site_name" content="Louis Lefebvre"><meta property="og:title" content="Wireless Interface Information using nl80211/Arch Install"><meta property="og:description" content="Just copying this over from one of my previous projects. It goes over my experience with low-level network programming using Linux network interfaces and Go. Along the way, I was having issues battling Network Manager when I had Fedora Linux installed, so I switched over to Arch and decided to just use iwd instead. It has proven to be must better in my experience and essentially remains out of the way.
Guess what? Not a whole lot of documentation for nl80211! Yayyyyy :)"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="tech"><meta property="article:published_time" content="2024-05-17T00:00:00+00:00"><meta property="article:modified_time" content="2024-05-17T00:00:00+00:00"><meta property="article:tag" content="Linux"><meta property="article:tag" content="Net"><meta name=twitter:card content="summary"><meta name=twitter:title content="Wireless Interface Information using nl80211/Arch Install"><meta name=twitter:description content="Just copying this over from one of my previous projects. It goes over my experience with low-level network programming using Linux network interfaces and Go. Along the way, I was having issues battling Network Manager when I had Fedora Linux installed, so I switched over to Arch and decided to just use iwd instead. It has proven to be must better in my experience and essentially remains out of the way.
Guess what? Not a whole lot of documentation for nl80211! Yayyyyy :)"><meta itemprop=name content="Wireless Interface Information using nl80211/Arch Install"><meta itemprop=description content="Just copying this over from one of my previous projects. It goes over my experience with low-level network programming using Linux network interfaces and Go. Along the way, I was having issues battling Network Manager when I had Fedora Linux installed, so I switched over to Arch and decided to just use iwd instead. It has proven to be must better in my experience and essentially remains out of the way.
Guess what? Not a whole lot of documentation for nl80211! Yayyyyy :)"><meta itemprop=datePublished content="2024-05-17T00:00:00+00:00"><meta itemprop=dateModified content="2024-05-17T00:00:00+00:00"><meta itemprop=wordCount content="651"><meta itemprop=keywords content="Linux,Net"><meta name=referrer content="no-referrer-when-downgrade"><link href=/original.min.css rel=stylesheet><script src=/js/d3.v3.min.js></script><script src=/js/topojson.v1.min.js></script><script src=/js/datamaps.world.min.js></script></head><body><header><a class=skip-link href=#main-content>Skip to main content</a>
<a href=/ class=title><h1>Louis Lefebvre</h1></a><nav><a href=/tech/>Tech</a>
<a href=/travel/>Travel</a></nav></header><main id=main-content><h1>Wireless Interface Information using nl80211/Arch Install</h1><p class=byline><time datetime=2024-05-17 pubdate>2024-05-17</time></p><content><p>Just copying this over from one of my previous projects. It goes over my
experience with low-level network programming using Linux network interfaces and
Go. Along the way, I was having issues battling <a href=https://fedoraproject.org/wiki/Tools/NetworkManager>Network Manager</a> when I had
Fedora Linux installed, so I switched over to Arch and decided to just use
<a href=https://wiki.archlinux.org/title/Iwd>iwd</a> instead. It has proven to be must better in my experience and
essentially remains out of the way.</p><hr><p>Guess what? Not a whole lot of documentation for nl80211! Yayyyyy :)</p><p>Not super surprising after working with netlink being that <strong>it uses the netlink
protocol</strong>. Anyways, mdlayher has already <a href=https://github.com/mdlayher/wifi/tree/main>created an implementation in
Go</a>, so I should be able to get my footing. Looks like the
implementation is only available for Linux, so I won&rsquo;t be able to do a whole lot
today(possible open source contribution opportunity).</p><p>Will I work on this before I try to install Arch on my laptop? I don&rsquo;t know, but
I feel like the Fedora OS is just draining my yoga x86.</p><h2 id=digging-deeper>Digging Deeper</h2><p>nl80211 is the userspace interface for the configuration API <a href=https://www.kernel.org/doc/html/v4.12/driver-api/80211/cfg80211.html>cfg80211</a>. This
was made to replace the deprecated <a href=https://hewlettpackard.github.io/wireless-tools/Linux.Wireless.Extensions.html>Wireless Extensions</a>.</p><h2 id=reimage-usb-on-linux-with-arch-iso>Reimage usb on Linux with Arch ISO</h2><h3 id=reformat-the-usb>Reformat the usb</h3><ol><li>find the usb drive with <code>sudo df -Ti</code></li><li>unmount usb to prep for reformat with(ex mount @ /dev/sda1) <code>sudo umount /dev/sda1</code></li><li>reformat to FAT32 filesystem: <code>sudo mkfs.vfat /dev/sdb1</code></li><li>verify usb formatting: <code>sudo fsck /dev/sdb1</code></li></ol><p><em>Side Note</em>: Reasons why FAT32 is a good choice; here are the filesystem comparisons:</p><table><thead><tr><th>File System</th><th>Supported File Size</th><th>Compatibility</th><th>Ideal Usage</th></tr></thead><tbody><tr><td>FAT32</td><td>up to 4 GB</td><td>Windows, Mac, Linux</td><td>For maximum compatibility</td></tr><tr><td>NTFS</td><td>16 EiB – 1 KB</td><td>Windows, Mac (read-only), most Linux distributions</td><td>For internal drives and Windows system files</td></tr><tr><td>exFAT</td><td>16 EiB – 1 KB</td><td>Windows, Mac, Linux (requires extra drivers to access)</td><td>For files larger than 4 GB</td></tr></tbody></table><h2 id=download-arch-iso>Download Arch ISO</h2><p>Just ran:
<code>wget -v https://mirrors.umd.edu/archlinux/iso/2024.04.01/archlinux-2024.04.01-x86_64.iso</code></p><p>Then get the gpg file:
<code>wget -v https://mirrors.umd.edu/archlinux/iso/2024.04.01/archlinux-2024.04.01-x86_64.iso.sig</code></p><p>Validate the package signature with gpg by running after both are downloaded:
<code>gpg --keyserver-options auto-key-retrieve --verify archlinux-2024.04.01-x86_64.iso.sig</code></p><p>Should return something like:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>gpg: assuming signed data in <span style=color:#e6db74>&#39;archlinux-2024.04.01-x86_64.iso&#39;</span>
</span></span><span style=display:flex><span>gpg: Signature made Mon <span style=color:#ae81ff>01</span> Apr <span style=color:#ae81ff>2024</span> 01:00:16 PM CDT
</span></span><span style=display:flex><span>gpg:                using EDDSA key 3E80CA1A8B89F69CBA57D98A76A5EF9054449A5C
</span></span><span style=display:flex><span>gpg:                issuer <span style=color:#e6db74>&#34;pierre@archlinux.org&#34;</span>
</span></span><span style=display:flex><span>gpg: Good signature from <span style=color:#e6db74>&#34;Pierre Schmitz &lt;pierre@archlinux.org&gt;&#34;</span> <span style=color:#f92672>[</span>unknown<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>gpg:                 aka <span style=color:#e6db74>&#34;Pierre Schmitz &lt;pierre@archlinux.de&gt;&#34;</span> <span style=color:#f92672>[</span>unknown<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>gpg: WARNING: The key<span style=color:#960050;background-color:#1e0010>&#39;</span>s User ID is not certified with a trusted signature!
</span></span><span style=display:flex><span>gpg:          There is no indication that the signature belongs to the owner.
</span></span><span style=display:flex><span>Primary key fingerprint: 3E80 CA1A 8B89 F69C BA57  D98A 76A5 EF90 <span style=color:#ae81ff>5444</span> 9A5C</span></span></code></pre></div><p>Once validated, copied the iso over to my mounted drive with the following:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>dd bs<span style=color:#f92672>=</span>4M <span style=color:#66d9ef>if</span><span style=color:#f92672>=</span>/home/louislefebvre/Downloads/wget-arch/archlinux-2024.04.01-x86_64.iso <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>of<span style=color:#f92672>=</span>/dev/disk/by-id/usb-SanDisk_Ultra_4C531001380617112524-0:0 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>conv<span style=color:#f92672>=</span>fsync oflag<span style=color:#f92672>=</span>direct status<span style=color:#f92672>=</span>progres</span></span></code></pre></div><h2 id=arch-finally-installed>Arch finally installed</h2><p>After about a month or so of messing around with the Arch install and figuring out how to
install all the necessary components, I have finally, successfully installed Arch Linux
whoop whoop. So, after all of those learnings and take-aways, I feel that I am in a spot
where I can pick this back up.</p><p>Understanding what drivers are and what driver I would needto install for the wireless
adapter is pretty simple now. Maybe I would pick that up if I&rsquo;m going to be messing around
with that racekit stuff. Anyways, maybe I should document all the changes I made to get Arch
setup? The hardest part was getting LVM setup with GRUB. I also got hung up on the GUI and
initially tried out LXDE but then switched to GNOME. LXDE was just so gross to look at and
it used XORG instead of the improved display server Wayland.</p><p>Anyways, it feels like I have the exact same laptop I had with Fedora OS, I just understand
my OS much better with Arch. Nothing lost, only gained(except for the 4k Alaskan surfing photo).</p><h2 id=additional-resources>Additional Resources</h2><ul><li><a href=https://medium.com/@mdlayher/linux-netlink-and-go-part-3-packages-netlink-genetlink-and-wifi-b0ca78e62f8a>mdlayher medium article</a></li><li><a href=https://github.com/mdlayher/wifi/tree/main>mdlayher wifi pkg</a></li><li><a href=https://alamot.github.io/nl80211/>nl80211 implementation in C</a></li><li><a href=https://www.infradead.org/~tgr/libnl/>netlink protocol summary</a></li><li><a href=https://wiki.archlinux.org/title/Installation_guide>arch install guide</a></li><li><a href=https://phoenixnap.com/kb/linux-format-usb>format usb linux</a></li><li><a href=https://archlinux.org/download/>arch download locations</a></li></ul></content><p><a class=blog-tags href=/tags/linux/>#linux</a>
<a class=blog-tags href=/tags/net/>#net</a></p><p><a href='mailto:louislefebvre1999@gmail.com?subject=Reply%20to%20"Wireless%20Interface%20Information%20using%20nl80211%2fArch%20Install"'>Reply to this post by email ↪</a></p></main><footer><small>2023 Louis LeFebvre | Made With ❤️ and <a href=https://clente.github.io/hugo-bearcub/>ᕦʕ •ᴥ•ʔᕤ</a></small></footer></body></html>